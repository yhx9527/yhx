# 死锁



## 一，含义

两个或两个以上的进程在执行过程汇总，因争夺资源而造成互相等待的现象，若无外力作用，都将无法推进下去



## 二，产生原因

1. 系统资源不足
2. 进程运行推进顺序不当
3. 资源分配不当



## 三，产生条件

1. 互斥条件：一个资源每次只能被一个进程使用
2. 请求与保持条件：一个进程在请求资源阻塞时，对已获得的资源不释放
3. 不可抢占条件：进程已获得的资源，在未使用完之前，不可强行剥夺
4. 循环等待：若干个进程之间形成一种头尾相接的循环等待资源的关系



## 四，解除

通过破坏产生死锁的四个必要条件来解除死锁，如所有进程在开始运行之前，必须一次性地申请其在运行过程中 所需的全部资源，在运行期间不允许再提出资源请求，通过这个来破坏请求与保持条件



## 五，避免

银行家算法

规则：

**当进程首次申请资源时，操作系统要测试该进程对资源的最大需求量，如果系统现存的资源可以满足它的最大需求量则按当前的申请量分配资源，否则就推迟分配。当进程在执行中继续申请资源时，先测试该进程本次申请的资源数是否超过了系统中资源所剩余的总量。若超过则拒绝分配资源，若能满足则按当前的申请量分配资源，否则也要推迟分配。**

把操作系统比作银行家，把操作系统管理的资源比作银行家管理的资金，进程向操作系统请求分配资源相当于用户向银行家贷款

为了保证资金安全，银行家规定：

1. 当一个顾客对资金的最大需求量不超过银行家现有的资金时就可接纳该顾客
2. 顾客可以分期贷款，但贷款总数不能超过最大需求量
3. 当银行家现有的资金不能满足顾客尚需的贷款金额时，对顾客的贷款可推迟支付，但总能使顾客在有限时间内得到贷款
4. 当顾客得到全部资金后，一定要在有限时间内归还所有资金
5. 



